# --- HOMESERVER CONFIGURATION ---
homeserver:
  address: http://synapse.railway.internal:8008
  domain: synapse-production-e1f9.up.railway.app

# --- APPSERVICE CONFIGURATION ---
appservice:
  address: http://mautrix-telegram.railway.internal:29317
  hostname: 0.0.0.0
  port: 29317
  database: postgres://postgres:BjUtajUuXkRKPnugsQzZULGUxdijseLX@postgres.railway.internal:5432/mautrix_telegram
  
  # Identity & Security
  id: telegram
  as_token: railway_secret_token_1
  hs_token: railway_secret_token_2

# --- TELEGRAM API CONFIGURATION ---
telegram:
  api_id: 35365569
  api_hash: 3c6ccc1a07813fea82e8a514d07e00e5

# --- BRIDGE SETTINGS ---
bridge:
  permissions:
    "synapse-production-e1f9.up.railway.app": "full"
    "@admin_1:synapse-production-e1f9.up.railway.app": "admin"

  # History & Backfill
  backfill:
    enabled: true
    initial_limit: 50
    missed_limit: 50
    disable_notifications: true

  # Puppet & Syncing Settings
  sync_with_custom_puppets: true
  double_puppet_allow_discovery: true
  double_puppet_server_map:
    synapse-production-e1f9.up.railway.app: http://synapse.railway.internal:8008

  # Authentication
  allow_matrix_login: true
  login_shared_secret_map:
    synapse-production-e1f9.up.railway.app: "JkD92LsKp0Q7A3xM"

  # Encryption & Device Management
  force_unverified_device: true
  device_name: "Telegram Bridge"

# --- LOGGING CONFIGURATION ---
logging:
  version: 1
  formatters:
    precise:
      format: "[%(asctime)s] [%(levelname)s@%(name)s] %(message)s"
  handlers:
    console:
      class: logging.StreamHandler
      formatter: precise
      stream: ext://sys.stdout
  loggers:
    mau:
      level: INFO
    telethon:
      level: INFO
  root:
    level: INFO
    handlers: [console]