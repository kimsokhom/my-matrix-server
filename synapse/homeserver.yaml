server_name: "${SERVER_NAME}"
public_baseurl: "https://${SERVER_NAME}/"
pid_file: /data/homeserver.pid
media_store_path: /data/media_store
signing_key_path: "/data/signing.key"

listeners:
  - port: 8008
    bind_addresses: ["0.0.0.0"]
    type: http
    tls: false
    x_forwarded: true
    resources:
      - names: [client, federation]
        compress: false

database:
  name: psycopg2
  allow_unsafe_locale: true
  args:
    user: "${POSTGRES_USER}"
    password: "${POSTGRES_PASSWORD}"
    host: "${POSTGRES_HOST}"
    database: "synapse"
    port: ${POSTGRES_PORT}
    cp_min: 5
    cp_max: 10

suppress_key_server_warning: true
macaroon_secret_key: "${MACAROON_KEY}"
form_secret: "${FORM_SECRET}"
registration_shared_secret: "${REGISTRATION_SHARED_SECRET}"

trusted_third_party_id_servers:
  - "${MAS_URL}"

enable_registration: true
enable_registration_without_verification: true

# Password configuration
password_config:
  minimum_length: 1
  require_digit: false
  require_symbol: false
  require_lowercase: false
  require_uppercase: false

serve_server_well_known: true
serve_client_well_known: true
enable_metrics: false
report_stats: false

app_service_config_files:
  - /etc/synapse/registration.yaml
